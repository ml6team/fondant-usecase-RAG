[tox]
isolated_build = True
envlist =
    pre-commit
    check-licenses
    py{38,39,310}

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: pre-commit,check-licenses,py310
    3.11: py311

[testenv:pre-commit]
skip_install=true
allowlist_externals=
    pre-commit
commands=pre-commit run --all-files --show-diff-on-failure

[testenv:check-licenses]
skip_install=true
deps=
    liccheck>=0.7.3,<0.8
commands_pre=
    python -m pip install -r src/requirements.txt
commands=
    python -m liccheck -s license_strategy.ini -r src/requirements.txt -l PARANOID
